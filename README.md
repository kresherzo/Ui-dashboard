# ASR Dashboard

Ğ”Ğ°ÑˆĞ±Ğ¾Ñ€Ğ´ Ğ´Ğ»Ñ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ° ASR Ğ´ĞµÑ‚ĞµĞºÑ†Ğ¸Ğ¹ Ñ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸ĞµĞ¹ Polymarket.

## ğŸš€ Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚

### Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ A: ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğº ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ĞµĞ¼Ñƒ Redis (Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞ½)

```bash
# 1. Ğ Ğ°ÑĞ¿Ğ°ĞºĞ¾Ğ²Ğ°Ñ‚ÑŒ
unzip asr-dashboard-v33.zip
cd asr-dashboard

# 2. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ .env Ñ„Ğ°Ğ¹Ğ» Ñ Ğ°Ğ´Ñ€ĞµÑĞ¾Ğ¼ Redis
cp .env.example .env
nano .env  # Ğ£ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ REDIS_HOST=IP_Ğ²Ğ°ÑˆĞµĞ³Ğ¾_Redis

# 3. Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ (Ğ‘Ğ•Ğ— Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Redis)
docker-compose up -d --build
```

### Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ B: Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Redis (Ğ´Ğ»Ñ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ)

```bash
# 1. Ğ Ğ°ÑĞ¿Ğ°ĞºĞ¾Ğ²Ğ°Ñ‚ÑŒ
cd asr-dashboard

# 2. Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ¡ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¼ Redis
docker-compose --profile local-redis up -d --build

# 3. Ğ¡Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ mock Ğ´Ğ»Ñ Ñ‚ĞµÑÑ‚Ğ¾Ğ²
docker-compose build mock-asr
```

---

## ğŸ“¡ ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğº Ğ²Ğ½ĞµÑˆĞ½ĞµĞ¼Ñƒ Redis

Dashboard **Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ‡Ğ¸Ñ‚Ğ°ĞµÑ‚** Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¸Ğ· Redis. ASR Ğ·Ğ°ĞºĞ°Ğ·Ñ‡Ğ¸ĞºĞ° **Ğ¿Ğ¸ÑˆĞµÑ‚** Ñ‚ÑƒĞ´Ğ°.

### ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ°

1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹ Ñ„Ğ°Ğ¹Ğ» `.env`:
```bash
REDIS_HOST=192.168.1.100   # IP ÑĞµÑ€Ğ²ĞµÑ€Ğ° Ñ Redis
REDIS_PORT=6379
```

2. ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸:
```bash
docker-compose down
docker-compose up -d
```

### ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ

ĞÑ‚ĞºÑ€Ğ¾Ğ¹ http://ÑĞµÑ€Ğ²ĞµÑ€:3000 â€” Ğ² Ğ¿Ñ€Ğ°Ğ²Ğ¾Ğ¼ Ğ²ĞµÑ€Ñ…Ğ½ĞµĞ¼ ÑƒĞ³Ğ»Ñƒ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ±Ñ‹Ñ‚ÑŒ **â— Connected**

Ğ•ÑĞ»Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ½ĞµÑ‚ â€” Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑŒ:
```bash
# Ğ›Ğ¾Ğ³Ğ¸ backend
docker logs asr-backend

# Ğ¢ĞµÑÑ‚ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ Ğº Redis
docker exec -it asr-backend python -c "import redis; r=redis.Redis(host='192.168.1.100'); print(r.ping())"
```

---

## ğŸ³ Portainer Settings

| ĞŸĞ¾Ğ»Ğµ | Ğ”Ğ»Ñ Ñ‚ĞµÑÑ‚Ğ¾Ğ² (mock) | Ğ”Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞ½Ğ° |
|------|-------------------|---------------|
| Portainer URL | `http://host.docker.internal:9000` | `http://localhost:9000` |
| Endpoint ID | (Ğ¸Ğ· URL Portainer) | (Ğ¸Ğ· URL Portainer) |
| API Token | (ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ² Portainer) | (ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ² Portainer) |
| ASR Image | `asr-dashboard-mock-asr:latest` | (Ğ¾Ğ±Ñ€Ğ°Ğ· ASR Ğ·Ğ°ĞºĞ°Ğ·Ñ‡Ğ¸ĞºĞ°) |
| Volumes Path | (Ğ¿ÑƒÑÑ‚Ğ¾) | `/path/to/asr-data` |
| Network Mode | `asr-network` | `host` |
| Redis Host | `redis` | (IP Redis ÑĞµÑ€Ğ²ĞµÑ€Ğ°) |

---

## ğŸ“Š ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Ğ¡ĞµÑ€Ğ²ĞµÑ€ Ğ·Ğ°ĞºĞ°Ğ·Ñ‡Ğ¸ĞºĞ°                          â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ASR #1      â”‚     â”‚ ASR #2      â”‚     â”‚ ASR #3      â”‚    â”‚
â”‚  â”‚ (xworst)    â”‚     â”‚ (xbest)     â”‚     â”‚ (yt)        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚                   â”‚                   â”‚            â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                             â–¼                                â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚                    â”‚     Redis       â”‚ â† ASR Ğ¿Ğ¸ÑˆĞµÑ‚ ÑÑĞ´Ğ°      â”‚
â”‚                    â”‚  192.168.1.100  â”‚                       â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                             â”‚                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Dashboard ÑĞµÑ€Ğ²ĞµÑ€                          â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Frontend   â”‚â”€â”€â”€â”€â–¶â”‚   Backend   â”‚â”€â”€â”€â”€â–¶â”‚   Redis     â”‚    â”‚
â”‚  â”‚  :3000      â”‚     â”‚   :8000     â”‚     â”‚ (Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ğ¹)   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â”‚  .env:                                                       â”‚
â”‚  REDIS_HOST=192.168.1.100                                   â”‚
â”‚  REDIS_PORT=6379                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Redis

Dashboard Ğ¾Ğ¶Ğ¸Ğ´Ğ°ĞµÑ‚ Ñ‚Ğ°ĞºĞ¸Ğµ ĞºĞ»ÑÑ‡Ğ¸:

| ĞšĞ»ÑÑ‡ | Ğ¢Ğ¸Ğ¿ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|------|-----|----------|
| `tokens_current_counts` | Hash | Ğ¡Ñ‡Ñ‘Ñ‚Ñ‡Ğ¸ĞºĞ¸ Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ² `{token_id: count}` |
| `tokens_updates_stream` | Stream | Ğ”ĞµÑ‚ĞµĞºÑ†Ğ¸Ğ¸ `{token_id, count, container_id, timestamp}` |
| `tokens` | Hash | Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Ñ‚Ğ¾ĞºĞµĞ½Ğ°Ñ… |
| `orderbook:*` | Sorted Set | Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¾Ñ€Ğ´ĞµÑ€Ğ±ÑƒĞºĞ¾Ğ² |

---

## ğŸ› Troubleshooting

### "Connection refused" Ğº Redis
```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒ Ñ‡Ñ‚Ğ¾ Redis Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½
redis-cli -h 192.168.1.100 ping

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒ firewall
sudo ufw allow 6379
```

### Dashboard Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ "Disconnected"
```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ
docker exec asr-backend env | grep REDIS

# ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸ Ñ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¼ .env
docker-compose down
docker-compose up -d
```

### ĞĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ² Monitor
1. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒ Ñ‡Ñ‚Ğ¾ ASR Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ¸ Ğ¿Ğ¸ÑˆĞµÑ‚ Ğ² Redis
2. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒ Ñ‡Ñ‚Ğ¾ REDIS_HOST Ğ² .env Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹
3. ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€Ğ¸ Ğ»Ğ¾Ğ³Ğ¸: `docker logs asr-backend`
